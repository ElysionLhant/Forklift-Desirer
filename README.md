
# Forklift Desirer - 高仿真集装箱装载优化系统

Forklift Desirer 不仅仅是一个理论上的空间堆叠工具，它是一个深度集成物流实操规范（Real-world Logistics Constraints）的智能决策系统。本系统核心解决了“如何物理装进去”和“如何实现最高装载率与最低成本组合”的问题。

## 🚀 核心仿真与实操逻辑 (Real-world Feasibility)

### 1. 成本优化策略 (Cost-Effective Heuristic)
*   **分级优先级**：系统内置严格的集装箱成本层级：**20GP (最低) < 40GP < 40HQ (最高)**。
*   **智能组合 (Smart Mix)**：算法不再依赖手动输入价格，而是通过启发式逻辑：
    *   首先尝试使用 20GP 承载全部货物。
    *   若无法单柜承载，则评估剩余货物的体积与高度。
    *   只有在 40GP 利用率显著低于 40HQ 或 40HQ 能显著减少总柜数时，才会选择更昂贵的 40HQ 柜型。

### 2. 物理门洞通过性校验 (Door Dimension Validation)
*   **逻辑**：集装箱的门框通常比内部空间窄。
*   **约束**：算法在装载前会校验货物在所有旋转方向下是否能通过 `doorDimensions`，防止装载方案在现实中无法进箱。

### 3. 叉车装载路径与避障 (Access Path Logic)
*   **逻辑**：货物必须能从箱门推送到最深处。
*   **约束**：系统校验从放置点到箱门的路径是否畅通，确保叉车作业空间，而非在 3D 中进行“穿模”放置。

### 4. 单机作业序列化 (Single Carrier Sequencing)
*   **逻辑**：模拟单台叉车或人工按顺序进箱作业。
*   **动画**：采用严格串行时间线，真实反馈装载节奏。

### 5. 预留抬高位置逻辑 (Over-lift Logic)
*   **逻辑**：叉车放置货物时需先抬高避开下层货物。
*   **约束**：引入 `LIFT_BUFFER` (10cm) 机制，模拟真实的“进入 -> 抬高 -> 入位 -> 垂直降落”轨迹。

## 🛠 技术实现细节

*   **坐标系**：Y轴向上，X轴为长度方向（0 为前壁，Max 为箱门）。
*   **支撑校验**：非地面货物必须获得下方货物至少 70% 的面积支撑，且下方货物必须未标记为 `unstackable`。
*   **安全余量**：内部尺寸预留了 `OPERATION_BUFFER` (2cm) 公差，应对现实中纸箱胀包等情况。

## 📦 使用建议

1.  **添加货物**：在 Manifest 中输入长宽高及重量。
2.  **设置属性**：对于精密仪器，勾选 `Unstackable`。
3.  **智能规划**：使用 `Smart Optimized Mix` 自动获取基于成本分级的最优柜型组合。
4.  **AI 协助**：通过右侧聊天框上传装箱单图片，AI 将自动识别尺寸并给出基于空间利用率的优化建议。
